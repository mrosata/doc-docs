{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["/**\n * Created by michael on 2/18/16.\n */\n\"use strict\";\n\nvar isObject = (!!isObject && typeof isObject === \"function\" ? isObject :\n    function isObject (...obj) {\n      obj.forEach((o)=> {\n        if (!o || typeof o !== \"object\")\n          return false;\n      });\n      return true;\n    }\n);\n\nclass ResponseUtils {\n  constructor () {\n\n  }\n\n  /**\n   * Figure out if obj is result of Facebook login/logoff\n   *\n   * @param fbObj obj\n   * @return object|boolean \"connected\", \"disconnected\", false\n   */\n  static fbResp(fbObj) {\n    if (!fbObj || typeof fbObj !== \"object\")\n      return false;\n    if (!fbObj.status || fbObj.status === \"unknown\")\n      return false;\n    if (!fbObj.hasOwnProperty('authResponse') || typeof fbObj.authResponse !== \"object\")\n      return false;\n    let resp = {\n      type: 'fb'\n    };\n    resp.action = fbObj.status;\n    resp.user_id = fbObj.authResponse.userID;\n    resp.access_token = fbObj.authResponse.accessToken;\n    resp.expires_in = fbObj.authResponse.expiresIn;\n    resp.signed_request = fbObj.authResponse.signedRequest;\n\n    return resp\n  }\n\n  static error (msg=\"\", code=0) {\n    return {\n      type: \"error\",\n      msg: msg,\n      code: code\n    }\n  }\n}\nvar respUtil = new ResponseUtils();\n\n\n/**\n * After page load run Foundation and handle events\n */\njQuery(function ($) {\n  var Foundation = $(document).foundation();\n\n  // Get the State for the App set through the templating engine\n  let ddStateElem = $('[data-doc-doc-state-object]');\n  const _STATE = (ddStateElem.length ? ddStateElem.data('appState') : \"\");\n\n  /**\n   * Open Modals with Errors or Flash Message Modals on load\n   *\n   * Check if a form inside of a reveal modal was submitted with errors\n   * and if so then have it be open. If no forms have error messages then\n   * this function will also check for Flask Flash Messages and show them\n   * inside modals.\n   */\n  function openFlashMessageAndErrorModalsOnLoad () {\n    var formsWithErrors = $('.reveal[data-errors-present=\"true\"]'),\n        flaskFlashMessages = $('.flash-messages .reveal');\n    if (formsWithErrors.length) {\n      formsWithErrors.foundation(\"open\");\n    } else if (flaskFlashMessages.length) {\n      // We only pop open flash messages if there aren't any forms with errors open.\n      flaskFlashMessages.each(function(t, n, a){\n        $(this).foundation(\"open\");\n      });\n    }\n  }\n  openFlashMessageAndErrorModalsOnLoad();\n\n  /**\n   * Log User out of the app (including fb or any other oauth).\n   */\n  window.accountDocDocsLogoff = function() {\n    FB.logout();\n    window.location = \"/logout\";\n  };\n\n  window.facebookDocDocsLogin = function() {\n\n    FB.login(function(fbObject) {\n\n      console.dir(fbObject);\n      let fbUserInfo = ResponseUtils.fbResp(fbObject);\n      if (!fbUserInfo || !isObject(fbUserInfo)) return false;\n\n      // Put the state of app from page into our response.\n      fbUserInfo._state = _STATE;\n\n      $.ajax({\n        url: \"/api/login\",\n        type: \"post\",\n        data: JSON.stringify(fbUserInfo),\n        contentType: \"application/json\",\n        success(result) {\n          // handle response from our own app\n          if (isObject(result) && result.status.toLowerCase() === \"success\") {\n            window.location = result.data.location;\n          }\n          else {\n            // The login failed somehow on server side\n            alert(\"Hew Son, Ve Ack a Pro Blah!\");\n          }\n        },\n        error(err) {\n          console.error(err);\n        }\n      });\n    }, {scope: 'email,public_profile,user_friends'});\n\n\n  };\n\n\n  /*\n   // Sticky profile menu object to hold all vars/props\n   var profileSticky = {};\n   // Only setup the sticky menu if this is a page with a container we want to use.\n   profileSticky.profileTabs = $('#profile-tabs-container').first();\n   console.log(profileSticky);\n   if (profileSticky.profileTabs.length) {\n\n   profileSticky.init = function (evt) {\n   profileSticky.offsetTop = profileSticky.profileTabs.offset().top;\n   };\n   profileSticky.scroll = function (evt) {\n   profileSticky.menuContainer.toggleClass('floating-menu', profileSticky.offsetTop < profileSticky.profileTabs.scrollTop().top);\n\n   console.log(profileSticky, profileSticky.profileTabs.scrollTop());\n   };\n\n   // Get the menu that we will make sticky\n   profileSticky.menuContainer = profileSticky.profileTabs.find('.tabs-menu-container');\n   // The resize event is just to know the offset height where the menu rests in natural state\n   $(window).on('resize', profileSticky.init );\n   // When we scroll check offset and set menu to proper state.\n   $(window).on('scroll', profileSticky.scroll);\n\n   profileSticky.init();\n   }\n   */\n});\n"],"sourceRoot":"/source/"}